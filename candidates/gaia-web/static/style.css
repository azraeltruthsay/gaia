/* GAIA Mission Control — Dark Theme */

:root {
  --bg-primary: #1a1a2e;
  --bg-panel: #16213e;
  --bg-card: #0f3460;
  --accent: #0f3460;
  --highlight: #e94560;
  --text: #e0e0e0;
  --text-muted: #8899aa;
  --text-bright: #ffffff;
  --border: #253658;
  --success: #4caf50;
  --warn: #ffa726;
  --error: #e94560;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  height: 100%;
  background: var(--bg-primary);
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 14px;
}

/* ── Top Bar ─────────────────────────── */

.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 16px;
  background: var(--bg-panel);
  border-bottom: 1px solid var(--border);
  height: 44px;
}

.top-bar-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo {
  font-size: 18px;
  font-weight: 700;
  color: var(--highlight);
  letter-spacing: 2px;
}

.subtitle {
  color: var(--text-muted);
  font-size: 13px;
}

.top-bar-right {
  display: flex;
  gap: 8px;
}

.badge {
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 11px;
  background: var(--bg-card);
  color: var(--text-muted);
}

.badge-ok { background: rgba(76, 175, 80, 0.2); color: var(--success); }
.badge-warn { background: rgba(255, 167, 38, 0.2); color: var(--warn); }
.badge-error { background: rgba(233, 69, 96, 0.2); color: var(--error); }

[x-cloak] { display: none !important; }

/* ── Tab Bar ─────────────────────────── */

.tab-bar {
  display: flex;
  gap: 0;
  background: var(--bg-panel);
  border-bottom: 1px solid var(--border);
  padding: 0 8px;
  height: 34px;
  align-items: stretch;
}

.tab {
  padding: 0 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--text-muted);
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
}

.tab:hover { color: var(--text); }
.tab.active { color: var(--highlight); border-bottom-color: var(--highlight); }

/* ── Views ───────────────────────────── */

.view {
  height: calc(100vh - 78px); /* 44px header + 34px tab bar */
  overflow: hidden;
}

.view-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  font-size: 16px;
  font-style: italic;
}

/* ── Panels Grid ─────────────────────── */

.panels {
  display: grid;
  grid-template-columns: 1fr 1.5fr 1fr;
  gap: 1px;
  height: 100%;
  background: var(--border);
}

.panel {
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.panel-header {
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-muted);
  background: var(--bg-panel);
  border-bottom: 1px solid var(--border);
}

.panel-subheader {
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
  border-top: 1px solid var(--border);
  margin-top: 8px;
}

.panel-body {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

/* ── Chat Panel ─────────────────────── */

.chat-messages {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 200px;
  max-height: calc(100vh - 150px);
  padding-bottom: 8px;
}

.chat-msg {
  padding: 8px 12px;
  border-radius: 8px;
  max-width: 85%;
  font-size: 13px;
  line-height: 1.5;
  word-wrap: break-word;
}

.chat-msg.user {
  background: var(--accent);
  color: var(--text-bright);
  align-self: flex-end;
  border-bottom-right-radius: 2px;
}

.chat-msg.gaia {
  background: var(--bg-panel);
  color: var(--text);
  align-self: flex-start;
  border-bottom-left-radius: 2px;
}

.chat-msg.gaia-auto {
  background: rgba(94, 53, 177, 0.18);
  color: var(--text);
  align-self: flex-start;
  border-bottom-left-radius: 2px;
  border-left: 2px solid rgba(149, 117, 205, 0.6);
}

.chat-msg.gaia-auto::before {
  content: 'listening';
  display: inline-block;
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: rgba(149, 117, 205, 0.8);
  margin-bottom: 4px;
}

.chat-msg.system {
  background: transparent;
  color: var(--text-muted);
  align-self: center;
  font-size: 11px;
  font-style: italic;
}

.chat-input-row {
  display: flex;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}

#chat-input {
  flex: 1;
  padding: 8px 12px;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 13px;
  outline: none;
}

#chat-input:focus {
  border-color: var(--highlight);
}

#chat-send {
  padding: 8px 16px;
  background: var(--highlight);
  color: var(--text-bright);
  border: none;
  border-radius: 6px;
  font-family: var(--font-mono);
  font-size: 13px;
  cursor: pointer;
}

#chat-send:hover { opacity: 0.85; }
#chat-send:disabled { opacity: 0.5; cursor: default; }

/* ── System State Panel ──────────────── */

.service-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 6px;
  margin-bottom: 4px;
}

.state-card {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 8px 10px;
  position: relative;
}

.state-card-candidate {
  border-left: 3px solid var(--warn);
}

.state-card-sleep {
  border-left: 3px solid var(--highlight);
}

.state-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
  margin-bottom: 3px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.state-candidate-badge {
  font-size: 8px;
  padding: 0 4px;
  border-radius: 4px;
  background: rgba(255, 167, 38, 0.2);
  color: var(--warn);
  letter-spacing: 0;
}

.state-value {
  font-size: 13px;
  font-weight: 600;
}

.state-value.ok { color: var(--success); }
.state-value.warn { color: var(--warn); }
.state-value.error { color: var(--error); }

.state-latency {
  font-size: 9px;
  color: var(--text-muted);
  margin-top: 2px;
}

.state-extra {
  font-size: 9px;
  color: var(--text-muted);
  margin-top: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ── Audio Processing Widget ─────────── */

.audio-panel {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-top: 8px;
  overflow: hidden;
}

.audio-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-bottom: 1px solid var(--border);
}

.audio-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
  flex: 1;
}

.audio-state-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.audio-state-badge.state-idle { background: rgba(128,128,128,0.2); color: #999; }
.audio-state-badge.state-listening { background: rgba(76,175,80,0.25); color: var(--success); animation: pulse-glow 2s infinite; }
.audio-state-badge.state-transcribing { background: rgba(79,195,247,0.25); color: #4fc3f7; }
.audio-state-badge.state-synthesizing { background: rgba(255,167,38,0.25); color: var(--warn); }
.audio-state-badge.state-muted { background: rgba(233,69,96,0.25); color: var(--error); }

@keyframes pulse-glow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.audio-gpu-badge {
  font-size: 9px;
  padding: 2px 6px;
  border-radius: 8px;
  background: var(--bg-card);
  color: var(--text-muted);
}

.audio-mute-btn {
  font-size: 10px;
  padding: 3px 10px;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--bg-card);
  color: var(--text);
  font-family: var(--font-mono);
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
}

.audio-mute-btn:hover { border-color: var(--highlight); }
.audio-mute-btn.muted { background: rgba(233,69,96,0.2); border-color: var(--error); color: var(--error); }

.audio-body {
  padding: 8px 10px;
}

.audio-gpu-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.audio-vram-track {
  flex: 1;
  height: 6px;
  background: var(--bg-card);
  border-radius: 3px;
  overflow: hidden;
}

.audio-vram-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--success), var(--warn));
  border-radius: 3px;
  transition: width 0.5s ease;
}

.audio-vram-text {
  font-size: 9px;
  color: var(--text-muted);
  white-space: nowrap;
}

.audio-columns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px;
  margin-bottom: 6px;
}

.audio-col-header {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.audio-log {
  height: 80px;
  overflow-y: auto;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 10px;
  line-height: 1.5;
}

.audio-log-entry {
  display: flex;
  gap: 4px;
}

.audio-log-time {
  color: var(--text-muted);
  flex-shrink: 0;
}

.audio-log-text {
  color: var(--text);
  word-break: break-word;
}

.audio-log-entry.stt .audio-log-text { color: #4fc3f7; }
.audio-log-entry.tts .audio-log-text { color: var(--warn); }
.audio-log-entry.error .audio-log-text { color: var(--error); }
.audio-log-entry.gpu .audio-log-text { color: #81c784; }

.audio-latency-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.audio-latency-label {
  font-size: 9px;
  color: var(--text-muted);
  text-transform: uppercase;
}

/* ── Voice Auto-Answer Panel ─────────── */

.voice-panel {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 10px 12px;
  margin-top: 8px;
  margin-bottom: 8px;
}

.voice-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.voice-title {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.voice-state-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.voice-state-badge.state-disconnected { background: rgba(136,153,170,0.15); color: var(--text-muted); }
.voice-state-badge.state-listening { background: rgba(76,175,80,0.2); color: var(--success); animation: pulse-glow 2s infinite; }
.voice-state-badge.state-transcribing { background: rgba(79,195,247,0.2); color: #4fc3f7; }
.voice-state-badge.state-responding { background: rgba(255,167,38,0.2); color: var(--warn); }
.voice-state-badge.state-speaking { background: rgba(233,69,96,0.2); color: var(--error); }

.voice-disconnect-btn {
  margin-left: auto;
  font-size: 10px;
  padding: 2px 10px;
  border: 1px solid var(--error);
  background: transparent;
  color: var(--error);
  border-radius: 4px;
  cursor: pointer;
}
.voice-disconnect-btn:hover { background: rgba(233,69,96,0.15); }

.voice-status-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  font-size: 11px;
}

.voice-channel { color: var(--text); }
.voice-duration { color: var(--text-muted); }

.voice-whitelist-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.voice-whitelist-hint {
  font-size: 9px;
  font-style: italic;
  text-transform: none;
  letter-spacing: 0;
}

.voice-user-list {
  max-height: 120px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.voice-user-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-left: 3px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  font-size: 11px;
  transition: border-color 0.15s, background 0.15s;
}

.voice-user-card:hover {
  border-color: var(--highlight);
  background: var(--bg-card);
}

.voice-user-card.whitelisted {
  border-left-color: var(--success);
}

.voice-user-name { color: var(--text); }

.voice-user-badge {
  font-size: 9px;
  padding: 1px 6px;
  border-radius: 8px;
}

.voice-user-badge.on {
  background: rgba(76,175,80,0.2);
  color: var(--success);
}

.voice-user-badge.off {
  background: rgba(136,153,170,0.1);
  color: var(--text-muted);
}

/* ── Graph Container ─────────────────── */

.graph-container {
  width: 100%;
  height: 300px;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-top: 8px;
  overflow: hidden;
}

#graph-svg {
  width: 100%;
  height: 100%;
  cursor: grab;
}

#graph-svg:active {
  cursor: grabbing;
}

.graph-node circle {
  stroke-width: 2px;
}

.graph-node text {
  font-size: 10px;
  fill: var(--text);
  text-anchor: middle;
  pointer-events: none;
}

.graph-edge {
  stroke-width: 1.5px;
  fill: none;
}

.graph-edge.active { stroke: #4fc3f7; }
.graph-edge.planned { stroke: #666; stroke-dasharray: 4,4; }
.graph-edge.deprecated { stroke: var(--error); stroke-dasharray: 2,2; }

/* ── Graph Breadcrumb ────────────────── */

.graph-breadcrumb {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0 2px;
  gap: 8px;
}

.graph-zoom-hint {
  font-size: 9px;
  color: var(--text-muted);
  opacity: 0.6;
  flex: 1;
  text-align: right;
}

.graph-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.graph-back {
  background: var(--bg-card);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 3px 10px;
  font-size: 11px;
  font-family: var(--font-mono);
  cursor: pointer;
  transition: background 0.15s;
}
.graph-back:hover { background: var(--accent); }

/* ── Component Graph ─────────────────── */

.component-node circle {
  stroke-width: 2px;
}

.component-node text {
  font-size: 9px;
  fill: var(--text);
  text-anchor: middle;
  pointer-events: none;
}

.component-edge {
  stroke: #7986cb;
  stroke-width: 1px;
  fill: none;
  stroke-dasharray: 3,2;
}

.component-edge-label {
  font-size: 8px;
  fill: var(--text-muted);
  pointer-events: none;
}

.component-detail {
  margin-top: 8px;
  padding: 10px;
  background: var(--bg-card);
  border-radius: 6px;
  border: 1px solid var(--border);
  font-size: 12px;
}

.component-detail h4 {
  color: var(--text-bright);
  margin-bottom: 6px;
}

.component-detail .comp-desc {
  color: var(--text-muted);
  margin-bottom: 8px;
  line-height: 1.4;
}

.component-detail code {
  background: var(--bg-panel);
  padding: 1px 4px;
  border-radius: 3px;
  font-size: 11px;
}

.component-detail ul {
  list-style: none;
  padding-left: 0;
}

.component-detail li {
  padding: 1px 0;
}

.component-detail li::before {
  content: '>';
  color: var(--accent);
  margin-right: 6px;
}

.tooltip {
  position: absolute;
  padding: 6px 10px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  font-size: 11px;
  color: var(--text);
  pointer-events: none;
  z-index: 100;
}

/* ── Blueprint Panel ─────────────────── */

.blueprint-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 8px;
}

.bp-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  cursor: pointer;
  transition: border-color 0.15s;
}

.bp-card:hover { border-color: var(--highlight); }
.bp-card.selected { border-color: var(--highlight); background: var(--bg-card); }

.bp-card-left {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.bp-card-id {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-bright);
}

.bp-card-role {
  font-size: 11px;
  color: var(--text-muted);
}

.bp-card-badges {
  display: flex;
  gap: 4px;
}

.bp-badge {
  font-size: 9px;
  padding: 1px 6px;
  border-radius: 8px;
}

.bp-badge.live { background: rgba(76, 175, 80, 0.2); color: var(--success); }
.bp-badge.candidate { background: rgba(255, 167, 38, 0.2); color: var(--warn); }
.bp-badge.genesis { background: rgba(233, 69, 96, 0.2); color: var(--error); }

.blueprint-detail {
  padding: 12px;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  font-size: 13px;
  line-height: 1.6;
  overflow-y: auto;
  max-height: calc(100vh - 340px);
}

.blueprint-detail h1 { font-size: 16px; color: var(--text-bright); margin-bottom: 8px; }
.blueprint-detail h2 { font-size: 14px; color: var(--highlight); margin-top: 12px; margin-bottom: 6px; }
.blueprint-detail h3 { font-size: 13px; color: var(--text-muted); margin-top: 10px; margin-bottom: 4px; }
.blueprint-detail p { margin-bottom: 6px; }
.blueprint-detail code { background: var(--bg-card); padding: 1px 4px; border-radius: 3px; font-size: 12px; }
.blueprint-detail pre { background: var(--bg-card); padding: 10px; border-radius: 4px; overflow-x: auto; margin: 6px 0; }
.blueprint-detail pre code { background: none; padding: 0; }
.blueprint-detail table { width: 100%; border-collapse: collapse; margin: 8px 0; }
.blueprint-detail th, .blueprint-detail td {
  padding: 4px 8px;
  border: 1px solid var(--border);
  text-align: left;
  font-size: 12px;
}
.blueprint-detail th { background: var(--bg-card); color: var(--text-muted); }
.blueprint-detail blockquote {
  border-left: 3px solid var(--highlight);
  padding-left: 12px;
  color: var(--text-muted);
  margin: 6px 0;
}
.blueprint-detail ul, .blueprint-detail ol { padding-left: 20px; margin: 4px 0; }
.blueprint-detail li { margin-bottom: 3px; }

/* ── Responsive ──────────────────────── */

@media (max-width: 1100px) {
  .panels {
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
  }
  .panel-system { grid-column: span 2; }
  .hooks-grid { grid-template-columns: 1fr; }
  .hook-group-wide { grid-column: span 1; }
}

@media (max-width: 700px) {
  .panels {
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  .panel-system { grid-column: auto; }
  .graph-container { height: 200px; }
  .hooks-grid { grid-template-columns: 1fr; }
  .hook-group-wide { grid-column: span 1; }
  .tab { padding: 0 10px; font-size: 11px; }
}

/* ── Hook/Command Panel ──────────────── */

.hooks-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  padding: 16px;
  height: 100%;
  overflow-y: auto;
  align-content: start;
}

.hook-group {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.hook-group-wide {
  grid-column: span 2;
}

.hook-group-header {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border);
  padding-bottom: 8px;
}

.hook-status {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

.hook-status-label { color: var(--text-muted); }
.hook-status-value { color: var(--text-bright); font-weight: 600; }

.hook-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.hook-btn {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--bg-card);
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s, opacity 0.15s;
}

.hook-btn:hover { opacity: 0.85; }
.hook-btn:disabled { opacity: 0.4; cursor: default; }
.hook-btn-primary { background: rgba(15, 52, 96, 0.8); border-color: #1a5276; color: #4fc3f7; }
.hook-btn-primary:hover { background: rgba(15, 52, 96, 1); }
.hook-btn-warn { background: rgba(255, 167, 38, 0.15); border-color: rgba(255, 167, 38, 0.4); color: var(--warn); }
.hook-btn-warn:hover { background: rgba(255, 167, 38, 0.25); }
.hook-btn-danger { background: rgba(233, 69, 96, 0.15); border-color: rgba(233, 69, 96, 0.4); color: var(--error); }
.hook-btn-danger:hover { background: rgba(233, 69, 96, 0.25); }

.hook-search-row {
  display: flex;
  gap: 8px;
}

.hook-search-input {
  flex: 1;
  padding: 8px 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 13px;
  outline: none;
}

.hook-search-input:focus { border-color: var(--highlight); }

.hook-search-row .hook-btn { flex: 0 0 auto; }

.hook-codex-results {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 10px;
  min-height: 120px;
  max-height: 300px;
  overflow-y: auto;
  font-size: 12px;
  line-height: 1.6;
}

.hook-codex-placeholder,
.hook-log-placeholder {
  color: var(--text-muted);
  font-style: italic;
  font-size: 12px;
}

.hook-codex-result {
  padding: 8px;
  border-bottom: 1px solid var(--border);
}

.hook-codex-result:last-child { border-bottom: none; }

.hook-codex-result-score {
  font-size: 10px;
  color: var(--text-muted);
  float: right;
}

.hook-codex-result-title {
  font-weight: 600;
  color: var(--text-bright);
  margin-bottom: 4px;
}

.hook-codex-result-snippet {
  color: var(--text);
  font-size: 11px;
}

.hook-action-log {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 8px 10px;
  min-height: 80px;
  max-height: 200px;
  overflow-y: auto;
  font-size: 11px;
  line-height: 1.6;
}

.hook-log-entry {
  display: flex;
  gap: 8px;
}

.hook-log-time { color: var(--text-muted); flex-shrink: 0; }
.hook-log-action { color: #4fc3f7; flex-shrink: 0; }
.hook-log-result { color: var(--text); }
.hook-log-entry.error .hook-log-result { color: var(--error); }
.hook-log-entry.success .hook-log-result { color: var(--success); }

/* ── File Browser ────────────────────── */

.file-browser { padding: 12px; height: calc(100vh - 80px); display: flex; flex-direction: column; }
.fb-toolbar { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.fb-root-select {
  background: var(--panel-bg); color: var(--text); border: 1px solid var(--border);
  border-radius: 4px; padding: 4px 8px; font-size: 11px; font-family: inherit;
}
.fb-breadcrumbs { display: flex; align-items: center; gap: 2px; flex: 1; overflow-x: auto; }
.fb-crumb {
  background: none; border: none; color: var(--text-muted); cursor: pointer;
  font-size: 11px; font-family: inherit; padding: 2px 4px; border-radius: 3px;
}
.fb-crumb:hover { background: var(--border); color: var(--text); }
.fb-crumb::after { content: '/'; color: var(--border); margin-left: 4px; }
.fb-crumb:last-child { color: var(--text); }
.fb-crumb:last-child::after { display: none; }
.fb-loading { font-size: 10px; color: var(--text-muted); }
.fb-error { background: rgba(255,82,82,0.1); color: var(--error); padding: 6px 10px; border-radius: 4px; font-size: 11px; margin-top: 8px; }
.fb-listing { flex: 1; overflow-y: auto; margin-top: 4px; }
.fb-entry {
  display: flex; align-items: center; gap: 8px; width: 100%;
  background: none; border: none; border-bottom: 1px solid var(--border);
  color: var(--text); padding: 6px 8px; cursor: pointer; font-family: inherit;
  font-size: 11px; text-align: left;
}
.fb-entry:hover { background: rgba(255,255,255,0.03); }
.fb-entry-icon { flex-shrink: 0; width: 18px; text-align: center; }
.fb-entry-name { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.fb-entry-dir .fb-entry-name { color: #4fc3f7; }
.fb-entry-size { color: var(--text-muted); flex-shrink: 0; width: 70px; text-align: right; }
.fb-entry-date { color: var(--text-muted); flex-shrink: 0; width: 140px; text-align: right; }
.fb-entry-up .fb-entry-name { color: var(--text-muted); font-style: italic; }
.fb-empty { color: var(--text-muted); font-size: 11px; padding: 20px; text-align: center; }

.fb-viewer { flex: 1; display: flex; flex-direction: column; overflow: hidden; margin-top: 4px; }
.fb-viewer-header { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.fb-back-btn {
  background: var(--panel-bg); color: var(--text-muted); border: 1px solid var(--border);
  border-radius: 4px; padding: 3px 8px; font-size: 11px; cursor: pointer; font-family: inherit;
}
.fb-back-btn:hover { color: var(--text); border-color: var(--text-muted); }
.fb-viewer-filename { font-size: 12px; font-weight: 600; color: var(--text); }
.fb-viewer-content {
  flex: 1; overflow: auto; margin: 0; padding: 10px;
  background: var(--bg); border: 1px solid var(--border); border-radius: 4px;
  font-size: 11px; line-height: 1.5; margin-top: 6px;
}
.fb-viewer-content code { color: var(--text); white-space: pre; }
.fb-editor-actions { display: flex; gap: 6px; margin-left: auto; }
.fb-edit-btn, .fb-save-btn, .fb-cancel-btn {
  background: var(--panel-bg); color: var(--text-muted); border: 1px solid var(--border);
  border-radius: 4px; padding: 3px 10px; font-size: 11px; cursor: pointer; font-family: inherit;
}
.fb-edit-btn:hover { color: #4fc3f7; border-color: #4fc3f7; }
.fb-save-btn { color: var(--success); border-color: var(--success); }
.fb-save-btn:hover { background: rgba(76,175,80,0.1); }
.fb-save-btn:disabled { opacity: 0.5; cursor: default; }
.fb-cancel-btn:hover { color: var(--error); border-color: var(--error); }
.fb-editor {
  flex: 1; width: 100%; margin-top: 6px; padding: 10px;
  background: var(--bg); color: var(--text); border: 1px solid #4fc3f7;
  border-radius: 4px; font-size: 11px; font-family: inherit; line-height: 1.5;
  resize: none; outline: none;
}

/* ── Terminal ─────────────────────────── */

.terminal-panel { padding: 12px; height: calc(100vh - 80px); display: flex; flex-direction: column; }
.term-toolbar { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.term-container-select {
  background: var(--panel-bg); color: var(--text); border: 1px solid var(--border);
  border-radius: 4px; padding: 4px 8px; font-size: 11px; font-family: inherit; min-width: 220px;
}
.term-connect-btn, .term-disconnect-btn, .term-refresh-btn {
  background: var(--panel-bg); color: var(--text-muted); border: 1px solid var(--border);
  border-radius: 4px; padding: 4px 10px; font-size: 11px; cursor: pointer; font-family: inherit;
}
.term-connect-btn:hover { color: var(--success); border-color: var(--success); }
.term-connect-btn:disabled { opacity: 0.5; cursor: default; }
.term-disconnect-btn { color: var(--error); border-color: var(--error); }
.term-disconnect-btn:hover { background: rgba(255,82,82,0.1); }
.term-refresh-btn:hover { color: var(--text); }
.term-status { font-size: 10px; color: var(--text-muted); margin-left: auto; }
.term-status-on { color: var(--success); }
.term-error { background: rgba(255,82,82,0.1); color: var(--error); padding: 6px 10px; border-radius: 4px; font-size: 11px; margin-top: 4px; }
.term-container { flex: 1; margin-top: 6px; border-radius: 4px; overflow: hidden; }

/* ── Knowledge Browser ───────────────── */

.kb-root-label {
  background: var(--panel-bg); color: #4fc3f7; border: 1px solid var(--border);
  border-radius: 4px; padding: 4px 10px; font-size: 11px; font-weight: 600;
}
.kb-markdown {
  flex: 1; overflow-y: auto; padding: 16px; margin-top: 6px;
  background: var(--bg); border: 1px solid var(--border); border-radius: 4px;
}

/* ── Generation Panel ────────────────── */

.gen-panel {
  display: flex; flex-direction: column;
  height: calc(100vh - 78px); padding: 10px;
  font-family: var(--font-mono); font-size: 12px;
}
.gen-toolbar {
  display: flex; align-items: center; gap: 6px;
  padding: 6px 0; border-bottom: 1px solid var(--border);
  margin-bottom: 6px; flex-shrink: 0;
}
.gen-status {
  font-size: 11px; padding: 2px 8px; border-radius: 10px;
  background: rgba(233,69,96,0.2); color: var(--error);
}
.gen-status-on { background: rgba(76,175,80,0.2); color: var(--success); }
.gen-filter-btn {
  background: var(--bg-card); color: var(--text-muted); border: 1px solid var(--border);
  border-radius: 4px; padding: 2px 10px; font-size: 11px; cursor: pointer;
}
.gen-filter-btn.active { color: var(--highlight); border-color: var(--highlight); }
.gen-scroll-lock {
  font-size: 11px; color: var(--text-muted); display: flex; align-items: center; gap: 4px;
}
.gen-clear-btn {
  background: transparent; color: var(--text-muted); border: 1px solid var(--border);
  border-radius: 4px; padding: 2px 10px; font-size: 11px; cursor: pointer;
}
.gen-clear-btn:hover { color: var(--error); border-color: var(--error); }

.gen-output {
  flex: 1; overflow-y: auto; padding: 4px 0;
}
.gen-entry { padding: 2px 6px; }
.gen-header {
  display: flex; align-items: center; gap: 8px;
  padding: 4px 6px; margin-top: 8px;
  border-left: 3px solid var(--text-muted);
  color: var(--text-muted); font-size: 11px;
}
.gen-role-prime { border-left-color: var(--highlight); }
.gen-role-lite { border-left-color: #4fc3f7; }
.gen-model-badge {
  text-transform: uppercase; font-weight: 700; font-size: 10px;
  padding: 1px 6px; border-radius: 3px;
  background: rgba(233,69,96,0.15); color: var(--highlight);
}
.gen-role-lite .gen-model-badge { background: rgba(79,195,247,0.15); color: #4fc3f7; }
.gen-model-name { color: var(--text); }
.gen-phase { color: var(--text-muted); font-style: italic; }
.gen-ts { margin-left: auto; color: var(--text-muted); font-size: 10px; }

.gen-stream {
  white-space: pre-wrap; word-break: break-word;
  color: var(--text); line-height: 1.5;
  margin: 0; font-family: inherit;
}
.gen-think { color: var(--text-muted); font-style: italic; opacity: 0.7; }

.gen-summary {
  display: flex; gap: 12px;
  color: var(--text-muted); font-size: 11px;
  padding: 2px 6px; margin-bottom: 6px;
  border-top: 1px dashed var(--border);
}
.gen-tps { color: var(--success); }

.gen-empty {
  color: var(--text-muted); text-align: center;
  padding: 40px 0; font-style: italic;
}

/* ── Logs Sub-Tabs & Service Log Panel ── */

/* gen-panel height reduced when inside logs view (subtab bar takes 30px) */
.view > .logs-subtabs + .gen-panel,
.view > .logs-subtabs ~ .gen-panel {
  height: calc(100vh - 108px);
}

.logs-subtabs {
  display: flex; gap: 0; padding: 0 10px;
  background: var(--bg-panel);
  border-bottom: 1px solid var(--border);
  height: 30px; align-items: stretch; flex-shrink: 0;
}
.logs-subtab {
  padding: 0 14px; background: transparent; border: none;
  border-bottom: 2px solid transparent;
  color: var(--text-muted); font-family: var(--font-mono);
  font-size: 11px; font-weight: 600; cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
}
.logs-subtab:hover { color: var(--text); }
.logs-subtab.active { color: var(--highlight); border-bottom-color: var(--highlight); }

.logs-svc-panel {
  display: flex; flex-direction: column;
  height: calc(100vh - 108px); /* header + tabs + subtabs */
  padding: 10px;
  font-family: var(--font-mono); font-size: 12px;
}
.logs-svc-label {
  text-transform: uppercase; font-weight: 700; font-size: 10px;
  padding: 1px 6px; border-radius: 3px;
  background: rgba(233,69,96,0.15); color: var(--highlight);
}
.logs-output {
  flex: 1; overflow-y: auto; padding: 4px 0;
}
.logs-line {
  padding: 1px 6px; white-space: pre-wrap; word-break: break-all;
  line-height: 1.45; font-size: 11px;
}
.logs-level-error { color: var(--error); }
.logs-level-warning { color: #ffb74d; }
.logs-level-debug { color: var(--text-muted); opacity: 0.6; }
.logs-level-info { color: var(--text); }

.logs-mode-btn {
  padding: 2px 8px; margin: 0 2px; border: 1px solid var(--border);
  border-radius: 3px; background: transparent; color: var(--text-muted);
  font-size: 11px; cursor: pointer;
}
.logs-mode-btn.active { background: var(--surface); color: var(--highlight); border-color: var(--highlight); }

.logs-level-toggles { display: flex; gap: 3px; margin-left: 8px; }
.logs-lvl-btn {
  padding: 2px 6px; border: 1px solid var(--border); border-radius: 3px;
  background: transparent; font-size: 10px; font-weight: 600;
  cursor: pointer; opacity: 0.4; transition: opacity 0.15s;
}
.logs-lvl-btn.active { opacity: 1; }
.logs-lvl-error { color: var(--error); border-color: var(--error); }
.logs-lvl-error.active { background: rgba(244,67,54,0.15); }
.logs-lvl-warn { color: #ffb74d; border-color: #ffb74d; }
.logs-lvl-warn.active { background: rgba(255,183,77,0.15); }
.logs-lvl-info { color: var(--text); border-color: var(--text-muted); }
.logs-lvl-info.active { background: rgba(255,255,255,0.08); }
.logs-lvl-debug { color: var(--text-muted); border-color: var(--text-muted); }
.logs-lvl-debug.active { background: rgba(255,255,255,0.05); }

/* ── Audio Listener Panel ────────────── */

.al-panel {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 78px);
  padding: 16px;
  gap: 12px;
  overflow-y: auto;
}

.al-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-muted);
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 10px;
}

.al-top {
  flex-shrink: 0;
}

.al-controls {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

.al-control-body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.al-control-col {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.al-status-col {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.al-field-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.al-field-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 2px;
}

.al-radio, .al-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text);
  cursor: pointer;
}

.al-radio input, .al-checkbox input {
  accent-color: var(--highlight);
  cursor: pointer;
}

.al-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.al-actions .hook-btn {
  flex: 1;
}

.al-status-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
  padding: 2px 0;
}

.al-status-label { color: var(--text-muted); }
.al-status-value { color: var(--text-bright); font-weight: 600; }
.al-status-file {
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 11px;
}

.al-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.al-badge-offline { background: rgba(136,153,170,0.15); color: var(--text-muted); }
.al-badge-idle { background: rgba(255,167,38,0.2); color: var(--warn); }
.al-badge-capturing { background: rgba(76,175,80,0.25); color: var(--success); animation: pulse-glow 2s infinite; }

/* ── Transcript ── */

.al-transcript-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

.al-transcript {
  flex: 1;
  overflow-y: auto;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 8px 10px;
  font-size: 12px;
  line-height: 1.6;
  min-height: 120px;
}

.al-transcript-line {
  padding: 2px 0;
  color: var(--text);
  word-break: break-word;
}

.al-transcript-empty {
  color: var(--text-muted);
  font-style: italic;
  font-size: 12px;
  padding: 20px;
  text-align: center;
}

.al-clear-btn {
  background: transparent;
  color: var(--text-muted);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 2px 10px;
  font-size: 10px;
  font-family: var(--font-mono);
  cursor: pointer;
  text-transform: none;
  letter-spacing: 0;
  font-weight: 400;
}

.al-clear-btn:hover { color: var(--error); border-color: var(--error); }

.al-ingest-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
  flex-shrink: 0;
}

.al-ingest-label {
  font-size: 11px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.al-ingest-input {
  flex: 1;
  max-width: 220px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 11px;
  outline: none;
}

.al-ingest-input:focus { border-color: var(--highlight); }

.al-ingest-row .hook-btn { flex: 0 0 auto; }

/* ── Action Log ── */

.al-log-section {
  flex-shrink: 0;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

.al-action-log {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 8px 10px;
  min-height: 60px;
  max-height: 160px;
  overflow-y: auto;
  font-size: 11px;
  line-height: 1.6;
}

/* ── Consent Panel ───────────────────── */

.ct-panel {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 78px);
  padding: 16px;
  gap: 12px;
  overflow-y: auto;
}

.ct-top { flex-shrink: 0; }

.ct-controls {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

.ct-control-body {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

.ct-tier-selector { flex: 1; }

.ct-field-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 6px;
  display: block;
}

.ct-tier-tabs {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.ct-tier-btn {
  padding: 4px 10px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  font-size: 10px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
  white-space: nowrap;
}

.ct-tier-btn:hover { color: var(--text); border-color: var(--text-muted); }
.ct-tier-btn.active { color: var(--highlight); border-color: var(--highlight); background: rgba(233, 69, 96, 0.1); }

.ct-stats-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--bg-card);
  color: var(--text-muted);
}

.ct-stats-row {
  display: flex;
  gap: 12px;
  align-items: flex-end;
}

.ct-stat { text-align: center; }
.ct-stat-label { font-size: 9px; text-transform: uppercase; color: var(--text-muted); display: block; margin-bottom: 2px; }
.ct-stat-value { font-size: 18px; font-weight: 700; }
.ct-stat-good { color: var(--success); }
.ct-stat-warn { color: var(--warn); }

/* ── Test Library ── */

.ct-library-section {
  flex-shrink: 0;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

.ct-test-list {
  max-height: 200px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.ct-test-card {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  font-size: 11px;
}

.ct-test-info { flex: 1; min-width: 0; }

.ct-test-id {
  font-weight: 700;
  color: #4fc3f7;
  margin-right: 8px;
  font-size: 10px;
}

.ct-test-prompt {
  color: var(--text);
  font-size: 11px;
}

.ct-test-tags {
  display: flex;
  gap: 3px;
  flex-shrink: 0;
}

.ct-tag {
  font-size: 8px;
  padding: 1px 5px;
  border-radius: 6px;
  background: rgba(79, 195, 247, 0.1);
  color: #4fc3f7;
  white-space: nowrap;
}

.ct-run-btn {
  flex: 0 0 auto !important;
  padding: 4px 14px !important;
  font-size: 11px !important;
}

.ct-empty {
  color: var(--text-muted);
  font-style: italic;
  font-size: 12px;
  padding: 16px;
  text-align: center;
}

/* ── Main: Result + History ── */

.ct-main {
  flex: 1;
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 12px;
  min-height: 0;
}

.ct-result-section {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
  overflow-y: auto;
}

.ct-result-detail { display: flex; flex-direction: column; gap: 10px; }

.ct-result-header {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.ct-tier-label {
  font-size: 10px;
  color: var(--text-muted);
}

.ct-badge {
  font-size: 9px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.ct-badge-engage { background: rgba(76, 175, 80, 0.2); color: var(--success); }
.ct-badge-reasoning { background: rgba(79, 195, 247, 0.2); color: #4fc3f7; }
.ct-badge-refuse { background: rgba(255, 167, 38, 0.2); color: var(--warn); }
.ct-badge-flag { background: rgba(233, 69, 96, 0.2); color: var(--error); }
.ct-badge-error { background: rgba(233, 69, 96, 0.15); color: var(--error); }
.ct-badge-unknown { background: rgba(136, 153, 170, 0.15); color: var(--text-muted); }

.ct-result-meta {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  font-size: 11px;
}

.ct-meta-item { color: var(--text-muted); }
.ct-meta-item strong { color: var(--text); }

.ct-meta-flag {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  background: rgba(233, 69, 96, 0.2);
  color: var(--error);
  font-weight: 600;
}

.ct-result-block {
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.ct-result-block-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  padding: 4px 8px;
  background: var(--bg-card);
  border-bottom: 1px solid var(--border);
}

.ct-result-block-content {
  padding: 8px 10px;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text);
  white-space: pre-wrap;
  word-break: break-word;
  max-height: 200px;
  overflow-y: auto;
}

.ct-result-block-content.ct-muted { color: var(--text-muted); font-style: italic; }
.ct-result-block-content.ct-response { background: var(--bg-primary); }

.ct-ack-block { border-color: rgba(76, 175, 80, 0.3); }
.ct-ack-block .ct-result-block-label { background: rgba(76, 175, 80, 0.1); color: var(--success); }

/* ── Reasoning Quality Flags ── */

.ct-flags-row {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ct-flags-group { display: flex; flex-wrap: wrap; gap: 4px; align-items: center; }
.ct-flags-label { font-size: 9px; text-transform: uppercase; color: var(--text-muted); margin-right: 4px; }

.ct-flag {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 4px;
  line-height: 1.4;
}

.ct-flag-green { background: rgba(76, 175, 80, 0.15); color: var(--success); }
.ct-flag-red { background: rgba(233, 69, 96, 0.15); color: var(--error); }

.ct-quality-indicators {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.ct-qi {
  font-size: 9px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.ct-qi-on { background: rgba(76, 175, 80, 0.2); color: var(--success); }
.ct-qi-off { background: rgba(136, 153, 170, 0.1); color: var(--text-muted); }
.ct-qi-warn { background: rgba(255, 167, 38, 0.2); color: var(--warn); }

.ct-result-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

/* ── History Panel ── */

.ct-history-section {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
  overflow-y: auto;
}

.ct-history-list {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.ct-history-entry {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: 4px;
  cursor: pointer;
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--text);
  text-align: left;
  width: 100%;
  transition: border-color 0.15s;
}

.ct-history-entry:hover { border-color: var(--highlight); }
.ct-history-entry.active { border-color: var(--highlight); background: var(--bg-card); }

.ct-history-time { color: var(--text-muted); font-size: 10px; flex-shrink: 0; }
.ct-history-id { color: #4fc3f7; font-size: 10px; font-weight: 600; flex: 1; }

.ct-history-ack {
  font-size: 8px;
  padding: 1px 5px;
  border-radius: 6px;
  background: rgba(76, 175, 80, 0.2);
  color: var(--success);
  text-transform: uppercase;
  font-weight: 700;
}

/* ── Log Section ── */

.ct-log-section {
  flex-shrink: 0;
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 14px;
}

/* ── Responsive ── */

@media (max-width: 900px) {
  .ct-main { grid-template-columns: 1fr; }
  .ct-control-body { flex-direction: column; }
}

/* ── Scrollbar ───────────────────────── */

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
