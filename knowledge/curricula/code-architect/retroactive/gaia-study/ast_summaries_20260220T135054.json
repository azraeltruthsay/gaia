{
  "__init__.py": {
    "module_docstring": "gaia-study: The Subconscious - Background processing and learning.\n\nThis service handles all background and learning operations:\n- Vector index building and maintenance (SOLE WRITER)\n- Document embedd",
    "classes": [],
    "functions": [],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [],
    "error_handlers": [],
    "http_calls": []
  },
  "indexer.py": {
    "module_docstring": "Vector Indexer - Document embedding and index management.\n\nThis module handles:\n- Building vector indexes from document directories\n- Adding documents to existing indexes\n- Querying indexes for simila",
    "classes": [
      {
        "name": "VectorIndexer",
        "bases": [],
        "docstring": "Vector index builder and manager.\n\nThis class is the SOLE WRITER to vector indexes in the GAIA SOA.\n",
        "methods": [
          {
            "name": "__init__",
            "params": [
              "self",
              "knowledge_base_name: str",
              "model_path: Optional[str] = None"
            ],
            "return_type": null,
            "decorators": [],
            "is_async": false,
            "line": 50
          },
          {
            "name": "instance",
            "params": [
              "cls",
              "knowledge_base_name: str"
            ],
            "return_type": "'VectorIndexer'",
            "decorators": [
              "classmethod"
            ],
            "is_async": false,
            "line": 86
          },
          {
            "name": "model",
            "params": [
              "self"
            ],
            "return_type": null,
            "decorators": [
              "property"
            ],
            "is_async": false,
            "line": 93
          },
          {
            "name": "index",
            "params": [
              "self"
            ],
            "return_type": "Dict[str, Any]",
            "decorators": [
              "property"
            ],
            "is_async": false,
            "line": 110
          },
          {
            "name": "load_index",
            "params": [
              "self"
            ],
            "return_type": "Dict[str, Any]",
            "decorators": [],
            "is_async": false,
            "line": 116
          },
          {
            "name": "save_index",
            "params": [
              "self"
            ],
            "return_type": "None",
            "decorators": [],
            "is_async": false,
            "line": 138
          },
          {
            "name": "refresh_index",
            "params": [
              "self"
            ],
            "return_type": "None",
            "decorators": [],
            "is_async": false,
            "line": 145
          },
          {
            "name": "build_index_from_docs",
            "params": [
              "self"
            ],
            "return_type": "bool",
            "decorators": [],
            "is_async": false,
            "line": 149
          },
          {
            "name": "add_document",
            "params": [
              "self",
              "file_path: str"
            ],
            "return_type": "bool",
            "decorators": [],
            "is_async": false,
            "line": 212
          },
          {
            "name": "query",
            "params": [
              "self",
              "query: str",
              "top_k: int = 5",
              "min_score: float = 0.0"
            ],
            "return_type": "List[Dict[str, Any]]",
            "decorators": [],
            "is_async": false,
            "line": 253
          },
          {
            "name": "_compute_similarities",
            "params": [
              "self",
              "query_embedding",
              "doc_embeddings: List[List[float]]"
            ],
            "return_type": "List[float]",
            "decorators": [],
            "is_async": false,
            "line": 312
          },
          {
            "name": "doc_count",
            "params": [
              "self"
            ],
            "return_type": "int",
            "decorators": [],
            "is_async": false,
            "line": 342
          },
          {
            "name": "get_status",
            "params": [
              "self"
            ],
            "return_type": "Dict[str, Any]",
            "decorators": [],
            "is_async": false,
            "line": 346
          }
        ],
        "line": 27
      }
    ],
    "functions": [],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [
      "from gaia_common.utils import get_logger"
    ],
    "error_handlers": [
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "load_index",
        "line": 134
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "add_document",
        "line": 249
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "_compute_similarities",
        "line": 327
      },
      {
        "exception_types": [
          "ImportError"
        ],
        "status_code": null,
        "enclosing_function": "model",
        "line": 100
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "model",
        "line": 105
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "build_index_from_docs",
        "line": 198
      }
    ],
    "http_calls": []
  },
  "main.py": {
    "module_docstring": "GAIA Study Server - Entry Point\n\nBackground processing service for GAIA:\n- Vector index building and maintenance (SOLE WRITER)\n- Document embedding\n- Conversation summarization\n- LoRA adapter training",
    "classes": [],
    "functions": [
      {
        "name": "startup_event",
        "params": [],
        "return_type": null,
        "decorators": [
          "app.on_event('startup')"
        ],
        "is_async": true,
        "line": 37
      },
      {
        "name": "shutdown_event",
        "params": [],
        "return_type": null,
        "decorators": [
          "app.on_event('shutdown')"
        ],
        "is_async": true,
        "line": 46
      }
    ],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [
      "from gaia_common.utils import setup_logging, get_logger, install_health_check_filter"
    ],
    "error_handlers": [],
    "http_calls": []
  },
  "qlora_trainer.py": {
    "module_docstring": "QLoRA Trainer - Actual training implementation for GAIA Self-Study\n\nUses PEFT and bitsandbytes for memory-efficient fine-tuning on consumer GPUs.\nDesigned for RTX 5080 16GB but adaptable to other conf",
    "classes": [
      {
        "name": "QLoRAConfig",
        "bases": [],
        "docstring": "Configuration for QLoRA training.",
        "methods": [
          {
            "name": "__post_init__",
            "params": [
              "self"
            ],
            "return_type": null,
            "decorators": [],
            "is_async": false,
            "line": 84
          },
          {
            "name": "from_dict",
            "params": [
              "cls",
              "config: Dict[str, Any]"
            ],
            "return_type": "'QLoRAConfig'",
            "decorators": [
              "classmethod"
            ],
            "is_async": false,
            "line": 89
          }
        ],
        "line": 59
      },
      {
        "name": "TrainingProgress",
        "bases": [],
        "docstring": "Progress information during training.",
        "methods": [],
        "line": 113
      },
      {
        "name": "QLoRATrainer",
        "bases": [],
        "docstring": "Handles the actual QLoRA training process.\n\nManages model loading, quantization, training loop, and ",
        "methods": [
          {
            "name": "__init__",
            "params": [
              "self",
              "base_model_path: str",
              "config: QLoRAConfig",
              "output_dir: str",
              "progress_callback: Optional[Callable[[TrainingProgress], None]] = None"
            ],
            "return_type": null,
            "decorators": [],
            "is_async": false,
            "line": 130
          },
          {
            "name": "setup",
            "params": [
              "self"
            ],
            "return_type": "bool",
            "decorators": [],
            "is_async": false,
            "line": 158
          },
          {
            "name": "_count_parameters",
            "params": [
              "self"
            ],
            "return_type": "Tuple[int, int]",
            "decorators": [],
            "is_async": false,
            "line": 239
          },
          {
            "name": "prepare_dataset",
            "params": [
              "self",
              "samples: List[Dict[str, str]]",
              "format_type: str = 'instruction'"
            ],
            "return_type": "Any",
            "decorators": [],
            "is_async": false,
            "line": 245
          },
          {
            "name": "train",
            "params": [
              "self",
              "train_dataset: Any",
              "adapter_name: str",
              "timeout_seconds: int = 600"
            ],
            "return_type": "Tuple[bool, Dict[str, Any]]",
            "decorators": [],
            "is_async": false,
            "line": 305
          },
          {
            "name": "save_adapter",
            "params": [
              "self",
              "adapter_name: str",
              "metadata: Optional[Dict[str, Any]] = None"
            ],
            "return_type": "Path",
            "decorators": [],
            "is_async": false,
            "line": 413
          },
          {
            "name": "cleanup",
            "params": [
              "self"
            ],
            "return_type": null,
            "decorators": [],
            "is_async": false,
            "line": 448
          }
        ],
        "line": 123
      }
    ],
    "functions": [
      {
        "name": "_lazy_import",
        "params": [],
        "return_type": null,
        "decorators": [],
        "is_async": false,
        "line": 30
      },
      {
        "name": "estimate_vram_usage",
        "params": [
          "model_params_billions: float",
          "lora_rank: int = 8",
          "batch_size: int = 1",
          "seq_length: int = 512",
          "use_4bit: bool = True"
        ],
        "return_type": "Dict[str, float]",
        "decorators": [],
        "is_async": false,
        "line": 464
      }
    ],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [],
    "error_handlers": [
      {
        "exception_types": [
          "ImportError"
        ],
        "status_code": null,
        "enclosing_function": "_lazy_import",
        "line": 49
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "setup",
        "line": 235
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "train",
        "line": 409
      }
    ],
    "http_calls": []
  },
  "server.py": {
    "module_docstring": "GAIA Study Server - FastAPI Application\n\nBackground processing API for vector indexing, document management,\nand LoRA adapter training (Study Mode).",
    "classes": [
      {
        "name": "IndexBuildRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to build/rebuild a vector index.",
        "methods": [],
        "line": 65
      },
      {
        "name": "DocumentAddRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to add a document to the index.",
        "methods": [],
        "line": 71
      },
      {
        "name": "QueryRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to query the vector index.",
        "methods": [],
        "line": 77
      },
      {
        "name": "StudyStartRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to start a study/training session.",
        "methods": [],
        "line": 88
      },
      {
        "name": "AdapterLoadRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to load an adapter.",
        "methods": [],
        "line": 100
      },
      {
        "name": "AdapterDeleteRequest",
        "bases": [
          "BaseModel"
        ],
        "docstring": "Request to delete an adapter.",
        "methods": [],
        "line": 106
      }
    ],
    "functions": [
      {
        "name": "get_study_manager",
        "params": [],
        "return_type": "StudyModeManager",
        "decorators": [],
        "is_async": false,
        "line": 26
      },
      {
        "name": "create_app",
        "params": [],
        "return_type": "FastAPI",
        "decorators": [],
        "is_async": false,
        "line": 112
      }
    ],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [
      "from gaia_common.utils import get_logger"
    ],
    "error_handlers": [
      {
        "exception_types": [
          "FileNotFoundError"
        ],
        "status_code": 404,
        "enclosing_function": "add_document",
        "line": 184
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "add_document",
        "line": 186
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "query_index",
        "line": 208
      },
      {
        "exception_types": [
          "ImportError"
        ],
        "status_code": null,
        "enclosing_function": "gpu_release",
        "line": 299
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "gpu_release",
        "line": 301
      },
      {
        "exception_types": [
          "HTTPException"
        ],
        "status_code": null,
        "enclosing_function": "study_start",
        "line": 370
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "study_start",
        "line": 372
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "study_status",
        "line": 382
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "study_cancel",
        "line": 396
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "adapter_list",
        "line": 411
      },
      {
        "exception_types": [
          "HTTPException"
        ],
        "status_code": null,
        "enclosing_function": "adapter_load",
        "line": 437
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "adapter_load",
        "line": 439
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "adapter_unload",
        "line": 453
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "adapter_delete",
        "line": 469
      },
      {
        "exception_types": [
          "HTTPException"
        ],
        "status_code": null,
        "enclosing_function": "adapter_info",
        "line": 493
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": 500,
        "enclosing_function": "adapter_info",
        "line": 495
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "do_build",
        "line": 162
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "do_training",
        "line": 358
      }
    ],
    "http_calls": []
  },
  "study_mode_manager.py": {
    "module_docstring": "StudyModeManager - GAIA Self-Study System\n\nOrchestrates the process of:\n1. Pausing inference\n2. Preparing training data from source documents\n3. Running QLoRA training\n4. Loading the resulting adapter",
    "classes": [
      {
        "name": "TrainingConfig",
        "bases": [],
        "docstring": "Configuration for a training run.",
        "methods": [],
        "line": 40
      },
      {
        "name": "TrainingResult",
        "bases": [],
        "docstring": "Result of a training run.",
        "methods": [],
        "line": 68
      },
      {
        "name": "StudyModeManager",
        "bases": [],
        "docstring": "Manages GAIA's self-study capabilities.\n\nCoordinates the process of training LoRA adapters from sour",
        "methods": [
          {
            "name": "__init__",
            "params": [
              "self",
              "config: Dict[str, Any]",
              "adapter_base_dir: str = '/models/lora_adapters'"
            ],
            "return_type": null,
            "decorators": [],
            "is_async": false,
            "line": 89
          },
          {
            "name": "validate_content",
            "params": [
              "self",
              "content: str"
            ],
            "return_type": "Tuple[bool, str]",
            "decorators": [],
            "is_async": false,
            "line": 120
          },
          {
            "name": "prepare_training_data",
            "params": [
              "self",
              "source_documents: List[str]",
              "output_format: str = 'instruction'"
            ],
            "return_type": "Tuple[List[Dict[str, str]], Dict[str, Any]]",
            "decorators": [],
            "is_async": false,
            "line": 143
          },
          {
            "name": "_create_instruction_samples",
            "params": [
              "self",
              "content: str",
              "doc_name: str"
            ],
            "return_type": "List[Dict[str, str]]",
            "decorators": [],
            "is_async": false,
            "line": 216
          },
          {
            "name": "_create_completion_samples",
            "params": [
              "self",
              "content: str"
            ],
            "return_type": "List[Dict[str, str]]",
            "decorators": [],
            "is_async": false,
            "line": 258
          },
          {
            "name": "_split_into_sections",
            "params": [
              "self",
              "content: str"
            ],
            "return_type": "List[str]",
            "decorators": [],
            "is_async": false,
            "line": 272
          },
          {
            "name": "start_training",
            "params": [
              "self",
              "config: TrainingConfig",
              "model_pool: Any = None"
            ],
            "return_type": "TrainingResult",
            "decorators": [],
            "is_async": true,
            "line": 286
          },
          {
            "name": "_run_qlora_training",
            "params": [
              "self",
              "samples: List[Dict[str, str]]",
              "config: TrainingConfig",
              "model_pool: Any"
            ],
            "return_type": "Tuple[Path, float, int]",
            "decorators": [],
            "is_async": true,
            "line": 403
          },
          {
            "name": "_run_real_qlora_training",
            "params": [
              "self",
              "samples: List[Dict[str, str]]",
              "config: TrainingConfig",
              "adapter_dir: Path",
              "base_model_path: str"
            ],
            "return_type": "Tuple[Path, float, int]",
            "decorators": [],
            "is_async": true,
            "line": 444
          },
          {
            "name": "_run_simulated_training",
            "params": [
              "self",
              "samples: List[Dict[str, str]]",
              "config: TrainingConfig",
              "adapter_dir: Path"
            ],
            "return_type": "Tuple[Path, float, int]",
            "decorators": [],
            "is_async": true,
            "line": 540
          },
          {
            "name": "_get_tier_directory",
            "params": [
              "self",
              "tier: int"
            ],
            "return_type": "Path",
            "decorators": [],
            "is_async": false,
            "line": 581
          },
          {
            "name": "_count_adapters_in_tier",
            "params": [
              "self",
              "tier_dir: Path"
            ],
            "return_type": "int",
            "decorators": [],
            "is_async": false,
            "line": 590
          },
          {
            "name": "_save_adapter_metadata",
            "params": [
              "self",
              "config: TrainingConfig",
              "adapter_path: Path",
              "training_metadata: Dict[str, Any]",
              "final_loss: float",
              "steps: int",
              "duration: float",
              "samples: int"
            ],
            "return_type": "Path",
            "decorators": [],
            "is_async": false,
            "line": 596
          },
          {
            "name": "get_status",
            "params": [
              "self"
            ],
            "return_type": "Dict[str, Any]",
            "decorators": [],
            "is_async": false,
            "line": 655
          },
          {
            "name": "cancel_training",
            "params": [
              "self"
            ],
            "return_type": "bool",
            "decorators": [],
            "is_async": false,
            "line": 664
          },
          {
            "name": "list_adapters",
            "params": [
              "self",
              "tier: Optional[int] = None"
            ],
            "return_type": "List[Dict[str, Any]]",
            "decorators": [],
            "is_async": false,
            "line": 674
          },
          {
            "name": "delete_adapter",
            "params": [
              "self",
              "adapter_name: str",
              "tier: int"
            ],
            "return_type": "bool",
            "decorators": [],
            "is_async": false,
            "line": 707
          }
        ],
        "line": 81
      }
    ],
    "functions": [],
    "endpoints": [],
    "enums": [
      {
        "name": "StudyModeState",
        "members": [
          [
            "IDLE",
            "'idle'"
          ],
          [
            "PREPARING",
            "'preparing'"
          ],
          [
            "VALIDATING",
            "'validating'"
          ],
          [
            "TRAINING",
            "'training'"
          ],
          [
            "LOADING",
            "'loading'"
          ],
          [
            "COMPLETE",
            "'complete'"
          ],
          [
            "FAILED",
            "'failed'"
          ]
        ],
        "line": 28
      }
    ],
    "constants": [],
    "gaia_imports": [],
    "error_handlers": [
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "start_training",
        "line": 389
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "delete_adapter",
        "line": 734
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "prepare_training_data",
        "line": 199
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "_run_qlora_training",
        "line": 438
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "list_adapters",
        "line": 702
      }
    ],
    "http_calls": []
  },
  "training_utils.py": {
    "module_docstring": null,
    "classes": [],
    "functions": [
      {
        "name": "get_base_model_name",
        "params": [
          "config: Config"
        ],
        "return_type": "Optional[str]",
        "decorators": [],
        "is_async": false,
        "line": 15
      },
      {
        "name": "check_for_training_delta",
        "params": [
          "config: Config"
        ],
        "return_type": "Tuple[bool, int, str]",
        "decorators": [],
        "is_async": false,
        "line": 39
      },
      {
        "name": "get_next_model_version",
        "params": [
          "config: Config",
          "full_retrain: bool"
        ],
        "return_type": "str",
        "decorators": [],
        "is_async": false,
        "line": 89
      },
      {
        "name": "convert_to_gguf",
        "params": [
          "model_path: str",
          "output_path: str"
        ],
        "return_type": null,
        "decorators": [],
        "is_async": false,
        "line": 108
      },
      {
        "name": "update_training_log",
        "params": [
          "config: Config",
          "new_entries: list",
          "new_model_name: str"
        ],
        "return_type": null,
        "decorators": [],
        "is_async": false,
        "line": 130
      }
    ],
    "endpoints": [],
    "enums": [],
    "constants": [],
    "gaia_imports": [],
    "error_handlers": [
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "get_base_model_name",
        "line": 35
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "convert_to_gguf",
        "line": 127
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "update_training_log",
        "line": 144
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "update_training_log",
        "line": 157
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "get_base_model_name",
        "line": 24
      },
      {
        "exception_types": [
          "Exception"
        ],
        "status_code": null,
        "enclosing_function": "convert_to_gguf",
        "line": 118
      }
    ],
    "http_calls": []
  }
}